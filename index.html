<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØºÙŠØ§Ø¨ - Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø´Ù…Ø§Ù…Ø³Ø©</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    

    <style>
        .school-logo {
          display: flex;
          justify-content: center;
          align-items: center;
          margin-bottom: 10px;
        }
        
        /* Ø§Ù„Ø¥Ø·Ø§Ø± Ø§Ù„Ù…Ø±Ø¨Ø¹ Ù…Ø¹ ØªØ£Ø«ÙŠØ± Ø§Ù„Ø£Ø²Ø±Ù‚ ÙˆØ§Ù„Ø¨Ù†ÙØ³Ø¬ÙŠ */
        .logo-frame {
          width: 100px;
          height: 100px;
          padding: 1px;
          background: linear-gradient(80deg, #3f51b5, #673ab7, #2196f3, #9c27b0, #3f51b5);
          background-size: 300% 300%;
          animation: rgb-rotate 6s linear infinite;
          display: flex;
          justify-content: center;
          align-items: center;
          border-radius: 16px;
          box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
          transition: transform 0.3s ease;
        }
        
        .logo-frame:hover {
          transform: scale(1.05);
        }
        
        /* Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø±Ø¨Ø¹Ø© */
        .logo-frame img {
          width: 114px;
          height: 114px;
          border-radius: 14px;
          object-fit: cover;
        }
        
        /* Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ù„ØªØºÙŠÙŠØ± Ø§Ù„Ø£Ù„ÙˆØ§Ù† */
        @keyframes rgb-rotate {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
        
        :root {
          --primary: #3498db;
          --primary-dark: #2980b9;
          --secondary: #2c3e50;
          --secondary-light: #34495e;
          --accent: #e74c3c;
          --accent-dark: #c0392b;
          --light: #2d3748;
          --lighter: #4a5568;
          --success: #2ecc71;
          --success-dark: #27ae60;
          --warning: #f39c12;
          --warning-dark: #e67e22;
          --text: #e2e8f0;
          --text-light: #a0aec0;
          --border: #4a5568;
          --bg-primary: #1a202c;
          --bg-secondary: #2d3748;
          --bg-card: #2d3748;
          --shadow: rgba(0, 0, 0, 0.4);
          --glow: rgba(52, 152, 219, 0.3);
        }
        
        * {
          box-sizing: border-box;
          margin: 0;
          padding: 0;
        }
        
        body {
          font-family: 'Tajawal', sans-serif;
          background: linear-gradient(135deg, #0f172a 0%, #1a202c 100%);
          color: var(--text);
          line-height: 1.6;
          min-height: 100vh;
        }
        
        .container {
          max-width: 1200px;
          margin: 0 auto;
          padding: 0 15px;
        }
        
        /* Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¹Ø§Ù… */
        header {
          background: linear-gradient(135deg, var(--primary), var(--secondary));
          color: white;
          padding: 20px 0;
          box-shadow: 0 4px 20px var(--shadow);
          position: relative;
          overflow: hidden;
        }
        
        header::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: linear-gradient(45deg, rgba(255,255,255,0.1) 0%, transparent 50%);
          pointer-events: none;
        }
        
        .logo {
          display: flex;
          align-items: center;
          justify-content: space-between;
          position: relative;
          z-index: 1;
        }
        
        .logo h1 {
          font-size: 24px;
          font-weight: 700;
          text-align: center;
          flex: 1;
          text-shadow: 0 2px 8px rgba(0,0,0,0.4);
          background: linear-gradient(90deg, #fff, #e2e8f0);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
        }
        
        .logo img {
          height: 90px;
          filter: drop-shadow(0 2px 8px rgba(0,0,0,0.4));
        }
        
        nav {
          background: var(--bg-secondary);
          box-shadow: 0 2px 15px var(--shadow);
          margin-bottom: 30px;
          border-radius: 0 0 16px 16px;
          position: relative;
          overflow: hidden;
        }
        
        .nav-links {
          display: flex;
          list-style: none;
          position: relative;
          z-index: 1;
        }
        
        .nav-links li a {
          display: block;
          padding: 15px 20px;
          color: var(--text);
          text-decoration: none;
          font-weight: 500;
          transition: all 0.3s ease;
          border-bottom: 3px solid transparent;
          position: relative;
          overflow: hidden;
        }
        
        .nav-links li a::before {
          content: '';
          position: absolute;
          top: 0;
          left: -100%;
          width: 100%;
          height: 100%;
          background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
          transition: left 0.5s;
        }
        
        .nav-links li a:hover::before {
          left: 100%;
        }
        
        .nav-links li a:hover,
        .nav-links li a.active {
          background: rgba(255, 255, 255, 0.05);
          color: var(--primary);
          border-bottom: 3px solid var(--primary);
          box-shadow: inset 0 0 15px var(--glow);
        }
        
        /* Ø§Ù„Ø£Ù‚Ø³Ø§Ù… */
        .section {
          display: none;
          background: var(--bg-card);
          border-radius: 16px;
          padding: 25px;
          margin-bottom: 30px;
          box-shadow: 0 8px 25px var(--shadow);
          border: 1px solid var(--border);
          transition: transform 0.3s ease, box-shadow 0.3s ease;
          backdrop-filter: blur(10px);
        }
        
        .section:hover {
          transform: translateY(-5px);
          box-shadow: 0 12px 30px var(--shadow);
        }
        
        .section.active {
          display: block;
          animation: fadeInUp 0.5s ease;
        }
        
        @keyframes fadeInUp {
          from { 
            opacity: 0; 
            transform: translateY(20px); 
          }
          to { 
            opacity: 1; 
            transform: translateY(0); 
          }
        }
        
        .section-title {
          color: var(--text);
          margin-bottom: 20px;
          padding-bottom: 15px;
          border-bottom: 2px solid var(--border);
          font-size: 22px;
          position: relative;
          font-weight: 700;
        }
        
        .section-title::after {
          content: '';
          position: absolute;
          bottom: -2px;
          right: 0;
          width: 80px;
          height: 3px;
          background: linear-gradient(90deg, var(--primary), transparent);
          border-radius: 3px;
        }
        
        /* Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ */
        .form-group {
          margin-bottom: 20px;
        }
        
        label {
          display: block;
          margin-bottom: 8px;
          font-weight: 500;
          color: var(--text);
        }
        
        input[type="text"],
        input[type="tel"],
        input[type="date"],
        select {
          width: 100%;
          padding: 12px 15px;
          border: 1px solid var(--border);
          border-radius: 8px;
          font-size: 16px;
          font-family: 'Tajawal', sans-serif;
          transition: all 0.3s ease;
          background: rgba(255, 255, 255, 0.05);
          color: var(--text);
          backdrop-filter: blur(5px);
        }
        
        input[type="text"]:focus,
        input[type="tel"]:focus,
        input[type="date"]:focus,
        select:focus {
          border-color: var(--primary);
          outline: none;
          box-shadow: 0 0 0 3px var(--glow);
          transform: translateY(-2px);
          background: rgba(255, 255, 255, 0.08);
        }
        
        .btn {
          display: inline-block;
          background: linear-gradient(135deg, var(--primary), var(--primary-dark));
          color: white;
          border: none;
          padding: 12px 25px;
          border-radius: 8px;
          cursor: pointer;
          font-size: 16px;
          font-weight: 500;
          transition: all 0.3s ease;
          font-family: 'Tajawal', sans-serif;
          position: relative;
          overflow: hidden;
          box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .btn::before {
          content: '';
          position: absolute;
          top: 0;
          left: -100%;
          width: 100%;
          height: 100%;
          background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
          transition: left 0.5s;
        }
        
        .btn:hover::before {
          left: 100%;
        }
        
        .btn:hover {
          transform: translateY(-3px);
          box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }
        
        .btn-success {
          background: linear-gradient(135deg, var(--success), var(--success-dark));
        }
        
        .btn-warning {
          background: linear-gradient(135deg, var(--warning), var(--warning-dark));
        }
        
        .btn-danger {
          background: linear-gradient(135deg, var(--accent), var(--accent-dark));
        }
        
        /* Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ */
        .table-container {
          overflow-x: auto;
          border-radius: 12px;
          border: 1px solid var(--border);
          box-shadow: 0 4px 15px var(--shadow);
          background: var(--bg-card);
        }
        
        table {
          width: 100%;
          border-collapse: collapse;
          margin: 0;
        }
        
        th, td {
          padding: 12px 15px;
          text-align: right;
          border-bottom: 1px solid var(--border);
        }
        
        th {
          background: linear-gradient(135deg, var(--light), var(--lighter));
          color: var(--text);
          font-weight: 600;
          position: sticky;
          top: 0;
          backdrop-filter: blur(10px);
        }
        
        tr {
          transition: background 0.3s ease;
        }
        
        tr:hover {
          background: rgba(255, 255, 255, 0.05);
        }
        
        /* Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„ØºÙŠØ§Ø¨ */
        .attendance-table {
          overflow-x: auto;
        }
        
        .attendance-check {
          text-align: center;
          cursor: pointer;
          font-size: 18px;
          transition: transform 0.2s ease;
        }
        
        .attendance-check:hover {
          transform: scale(1.3);
        }
        
        .present {
          color: var(--success);
          text-shadow: 0 0 8px rgba(46, 204, 113, 0.5);
        }
        
        .absent {
          color: var(--accent);
          text-shadow: 0 0 8px rgba(231, 76, 60, 0.5);
        }
        
        /* Ø§Ù„Ø¨Ø­Ø« */
        .search-box {
          display: flex;
          margin-bottom: 20px;
          border-radius: 8px;
          overflow: hidden;
          box-shadow: 0 4px 15px var(--shadow);
        }
        
        .search-box input {
          flex: 1;
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
          border: none;
        }
        
        .search-box button {
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
          border: none;
        }
        
        /* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
        .cards-container {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
          gap: 20px;
          margin-top: 20px;
        }
        
        .card {
          background: var(--bg-card);
          border-radius: 16px;
          padding: 20px;
          box-shadow: 0 5px 15px var(--shadow);
          border-top: 4px solid var(--primary);
          transition: transform 0.3s ease, box-shadow 0.3s ease;
          position: relative;
          overflow: hidden;
          backdrop-filter: blur(10px);
        }
        
        .card::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          height: 4px;
          background: linear-gradient(90deg, var(--primary), var(--accent), var(--success), var(--warning), var(--primary));
          background-size: 400% 400%;
          animation: gradient-shift 3s ease infinite;
        }
        
        .card:hover {
          transform: translateY(-8px);
          box-shadow: 0 12px 30px var(--shadow);
        }
        
        @keyframes gradient-shift {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
        
        .card-title {
          font-size: 18px;
          font-weight: 600;
          margin-bottom: 10px;
          color: var(--text);
        }
        
        .card-detail {
          margin-bottom: 8px;
          display: flex;
        }
        
        .card-detail strong {
          min-width: 100px;
          color: var(--text-light);
        }
        
        /* Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª */
        .alert {
          padding: 15px;
          border-radius: 8px;
          margin-bottom: 20px;
          border-left: 4px solid;
          animation: slideIn 0.5s ease;
          backdrop-filter: blur(5px);
        }
        
        @keyframes slideIn {
          from { transform: translateX(-20px); opacity: 0; }
          to { transform: translateX(0); opacity: 1; }
        }
        
        .alert-success {
          background: rgba(46, 204, 113, 0.1);
          color: var(--success);
          border-color: var(--success);
        }
        
        .alert-error {
          background: rgba(231, 76, 60, 0.1);
          color: var(--accent);
          border-color: var(--accent);
        }
        
        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© */
        .glow {
          box-shadow: 0 0 15px var(--glow);
        }
        
        .pulse {
          animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
          0% { box-shadow: 0 0 0 0 rgba(52, 152, 219, 0.7); }
          70% { box-shadow: 0 0 0 10px rgba(52, 152, 219, 0); }
          100% { box-shadow: 0 0 0 0 rgba(52, 152, 219, 0); }
        }
        
        /* Ø§Ù„ØªÙƒÙŠÙ Ù…Ø¹ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„Ù…Ø®ØªÙ„ÙØ© */
        @media (max-width: 768px) {
          .nav-links {
            flex-direction: column;
          }
          
          .cards-container {
            grid-template-columns: 1fr;
          }
          
          .logo h1 {
            font-size: 18px;
          }
          
          table {
            font-size: 14px;
          }
          
          th, td {
            padding: 8px 10px;
          }
          
          .btn {
            padding: 10px 15px;
            font-size: 14px;
          }
        }
        
        @media (max-width: 480px) {
          .logo {
            flex-direction: column;
            text-align: center;
          }
          
          .logo h1 {
            margin: 10px 0;
          }
          
          .section {
            padding: 15px;
          }
        }
        
        /* Ù†Ù…Ø· Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª */
        .action-buttons {
          display: flex;
          gap: 5px;
          flex-wrap: wrap;
        }
        
        .action-buttons .btn {
          padding: 8px 12px;
          font-size: 14px;
        }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ù…Ø®ØµØµ */
        ::-webkit-scrollbar {
          width: 8px;
        }
        
        ::-webkit-scrollbar-track {
          background: var(--bg-primary);
        }
        
        ::-webkit-scrollbar-thumb {
          background: var(--lighter);
          border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
          background: var(--primary);
        }
        </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">
                <h1> Ù†Ø¸Ø§Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØºÙŠØ§Ø¨ - Ù…Ø¯Ø±Ø³Ø© Ø¨ÙŠ Ù†ÙŠØ´ØªÙŠ Ø§ÙŠØ¨Ø³ÙƒÙˆØ¨Ø³ </h1>
                <div class="school-logo">
                    <div class="logo-frame">
                      <img src="WhatsApp Image 2025-09-25 at 13.04.33_37954a2f.jpg" alt="School Logo">
                    </div>
                  </div>
            </div>
        </div>
    </header>
    
    <nav>
        <div class="container">
            <ul class="nav-links">
                <li><a href="#" class="nav-link active" data-section="students">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø§Ø¨</a></li>
                <li><a href="#" class="nav-link" data-section="weeks">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø³Ø§Ø¨ÙŠØ¹</a></li>
                <li><a href="#" class="nav-link" data-section="attendance">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØºÙŠØ§Ø¨</a></li>
                <li><a href="#" class="nav-link" data-section="search">Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø·Ø§Ù„Ø¨</a></li>
                <li><a href="#" class="nav-link" data-section="reports">Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</a></li>
            </ul>
        </div>
    </nav>
    
    <div class="container">
        <!-- Ù‚Ø³Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø§Ø¨ -->
        <section id="students" class="section active">
            <h2 class="section-title">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø§Ø¨</h2>
            
            <form id="studentForm">
                <div class="form-group">
                    <label for="studentName">Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„ÙƒØ§Ù…Ù„</label>
                    <input type="text" id="studentName" required>
                </div>
                
                <div class="form-group">
                    <label for="guardianName">Ø§Ø³Ù… ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±</label>
                    <input type="text" id="guardianName" required>
                </div>
                
                <div class="form-group">
                    <label for="studentPhone">Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø§Ù„Ø·Ø§Ù„Ø¨ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                    <input type="tel" id="studentPhone">
                </div>
                
                <div class="form-group">
                    <label for="fatherPhone">Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø§Ù„Ø£Ø¨</label>
                    <input type="tel" id="fatherPhone" required>
                </div>
                
                <div class="form-group">
                    <label for="motherPhone">Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø§Ù„Ø£Ù…</label>
                    <input type="tel" id="motherPhone" required>
                </div>
                
                <button type="submit" class="btn">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ø§Ù„Ø¨</button>
            </form>
            
            <div id="studentsList" style="margin-top: 30px;">
                <h3>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†</h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Ø§Ù„Ø§Ø³Ù…</th>
                                <th>ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±</th>
                                <th>Ù‡Ø§ØªÙ Ø§Ù„Ø·Ø§Ù„Ø¨</th>
                                <th>Ù‡Ø§ØªÙ Ø§Ù„Ø£Ø¨</th>
                                <th>Ù‡Ø§ØªÙ Ø§Ù„Ø£Ù…</th>
                                <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                            </tr>
                        </thead>
                        <tbody id="studentsTableBody">
                            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† localStorage -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
        
        <!-- Ù‚Ø³Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø³Ø§Ø¨ÙŠØ¹ -->
        <section id="weeks" class="section">
            <h2 class="section-title">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø³Ø§Ø¨ÙŠØ¹ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©</h2>
            
            <form id="weekForm">
                <div class="form-group">
                    <label for="weekName">Ø§Ø³Ù… Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</label>
                    <input type="text" id="weekName" placeholder="Ù…Ø«Ø§Ù„: Ø£Ø³Ø¨ÙˆØ¹ Ø£ÙˆÙ„" required>
                </div>
                
                <div class="form-group">
                    <label for="weekDate">ØªØ§Ø±ÙŠØ® Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</label>
                    <input type="date" id="weekDate" required>
                </div>
                
                <button type="submit" class="btn">Ø¥Ø¶Ø§ÙØ© Ø£Ø³Ø¨ÙˆØ¹ Ø¬Ø¯ÙŠØ¯</button>
            </form>
            
            <div id="weeksList" style="margin-top: 30px;">
                <h3>Ø§Ù„Ø£Ø³Ø§Ø¨ÙŠØ¹ Ø§Ù„Ù…Ø¶Ø§ÙØ©</h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Ø§Ø³Ù… Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</th>
                                <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©</th>
                                <th>Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø§Ø¨</th>
                                <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                            </tr>
                        </thead>
                        <tbody id="weeksTableBody">
                            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† localStorage -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
        
        <!-- Ù‚Ø³Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØºÙŠØ§Ø¨ -->
        <section id="attendance" class="section">
            <h2 class="section-title">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØºÙŠØ§Ø¨</h2>
            
            <div class="form-group">
                <label for="weekSelect">Ø§Ø®ØªØ± Ø£Ø³Ø¨ÙˆØ¹ Ù„Ù„ØªØ³Ø¬ÙŠÙ„:</label>
                <select id="weekSelect">
                    <option value="">-- Ø§Ø®ØªØ± Ø£Ø³Ø¨ÙˆØ¹ --</option>
                </select>
            </div>
            
            <div id="attendanceTableContainer" class="attendance-table" style="display: none;">
                <h3>Ø³Ø¬Ù„ Ø­Ø¶ÙˆØ± ÙˆØºÙŠØ§Ø¨ Ø§Ù„Ø·Ù„Ø§Ø¨</h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</th>
                                <th>Ø§Ù„Ø­Ø¶ÙˆØ±</th>
                                <th>Ø§Ù„ØºÙŠØ§Ø¨</th>
                            </tr>
                        </thead>
                        <tbody id="attendanceTableBody">
                            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† localStorage -->
                        </tbody>
                    </table>
                </div>
                
                <button id="saveAttendance" class="btn btn-success" style="margin-top: 20px;">Ø­ÙØ¸ Ø§Ù„ØªØ³Ø¬ÙŠÙ„</button>
            </div>
        </section>
        
        <!-- Ù‚Ø³Ù… Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø·Ø§Ù„Ø¨ -->
        <section id="search" class="section">
            <h2 class="section-title">Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø·Ø§Ù„Ø¨</h2>
            
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ Ø£Ùˆ ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±...">
                <button id="searchButton" class="btn">Ø¨Ø­Ø«</button>
            </div>
            
            <div id="searchResults">
                <!-- Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« Ù‡Ù†Ø§ -->
            </div>
        </section>
        
        <!-- Ù‚Ø³Ù… Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± -->
        <section id="reports" class="section">
            <h2 class="section-title">ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„ØºÙŠØ§Ø¨</h2>
            
            <div class="form-group">
                <label for="reportWeekSelect">Ø§Ø®ØªØ± Ø£Ø³Ø¨ÙˆØ¹ Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø±ÙŠØ±:</label>
                <select id="reportWeekSelect">
                    <option value="">-- Ø§Ø®ØªØ± Ø£Ø³Ø¨ÙˆØ¹ --</option>
                </select>
            </div>
            
            <div id="reportResults">
                <!-- Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ù‡Ù†Ø§ -->
            </div>
        </section>
    </div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwgIJlNjgKmzKAEMpRcem3O0FN4Tz-uMEMRQfLNHSUMxzoW8g7JGyKC309zIHFIO5KusQ/exec";

let students = [];
let weeks = [];
let attendance = {};
let isProcessing = false; // Ù„Ù…Ù†Ø¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø© ÙÙŠ Ù†ÙØ³ Ø§Ù„ÙˆÙ‚Øª

// -------------------------
// ğŸ“Œ 1) Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„Ø·Ù„Ø¨Ø§Øª Ù…Ø¹ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
// -------------------------

async function makeRequest(url, options = {}) {
  if (isProcessing) {
    throw new Error("ÙŠÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ© Ø£Ø®Ø±Ù‰ Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±");
  }
  
  isProcessing = true;
  showLoading("Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...");
  
  try {
    const response = await fetch(url, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      ...options
    });
    
    if (!response.ok) {
      throw new Error(`Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: ${response.status}`);
    }
    
    const result = await response.json();
    return result;
  } catch (error) {
    console.error('Request failed:', error);
    throw error;
  } finally {
    isProcessing = false;
    hideLoading();
  }
}

// Ø¯Ø§Ù„Ø© Ù„Ø¹Ø±Ø¶ Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
function showLoading(message = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...") {
  let loadingDiv = document.getElementById("loadingIndicator");
  if (!loadingDiv) {
    loadingDiv = document.createElement("div");
    loadingDiv.id = "loadingIndicator";
    loadingDiv.style.cssText = `
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0,0,0,0.8);
      color: white;
      padding: 20px;
      border-radius: 10px;
      z-index: 10000;
      display: flex;
      align-items: center;
      gap: 10px;
    `;
    document.body.appendChild(loadingDiv);
  }
  
  loadingDiv.innerHTML = `
    <div class="spinner"></div>
    <span>${message}</span>
  `;
  loadingDiv.style.display = 'flex';
}

function hideLoading() {
  const loadingDiv = document.getElementById("loadingIndicator");
  if (loadingDiv) {
    loadingDiv.style.display = 'none';
  }
}

// Ø¥Ø¶Ø§ÙØ© CSS Ù„Ù„Ø³Ø¨ÙŠÙ†Ø±
const spinnerStyle = document.createElement('style');
spinnerStyle.textContent = `
  .spinner {
    border: 3px solid #f3f3f3;
    border-top: 3px solid #3498db;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    animation: spin 1s linear infinite;
  }
  
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
`;
document.head.appendChild(spinnerStyle);

// -------------------------
// ğŸ“Œ 2) Ø¯ÙˆØ§Ù„ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
// -------------------------

async function fetchStudents() {
  try {
    const response = await fetch(`${SCRIPT_URL}?type=students`);
    if (!response.ok) throw new Error('ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
    
    const data = await response.json();
    
    if (data.error) {
      throw new Error(data.error);
    }
    
    students = data.slice(1).map(row => ({
      id: row[0].toString(),
      name: row[1],
      guardian: row[2],
      studentPhone: row[3],
      fatherPhone: row[4],
      motherPhone: row[5]
    }));
    renderStudentsList();
  } catch (error) {
    console.error("Error fetching students:", error);
    // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© ÙÙŠ Ø­Ø§Ù„Ø© ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„
    students = [
      { id: "1", name: "Ù…Ø­Ù…Ø¯ Ø£Ø­Ù…Ø¯", guardian: "Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯", studentPhone: "0123456789", fatherPhone: "0123456789", motherPhone: "0123456789" },
      { id: "2", name: "Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…ÙˆØ¯", guardian: "Ù…Ø­Ù…ÙˆØ¯ Ø£Ø­Ù…Ø¯", studentPhone: "0123456789", fatherPhone: "0123456789", motherPhone: "0123456789" }
    ];
    renderStudentsList();
  }
}

async function fetchWeeks() {
  try {
    const response = await fetch(`${SCRIPT_URL}?type=weeks`);
    if (!response.ok) throw new Error('ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
    
    const data = await response.json();
    
    if (data.error) {
      throw new Error(data.error);
    }
    
    weeks = data.slice(1).map(row => ({
      id: row[0].toString(),
      name: row[1],
      date: row[2]
    }));
    renderWeeksList();
    updateWeekSelect();
    updateReportWeekSelect();
  } catch (error) {
    console.error("Error fetching weeks:", error);
    // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© ÙÙŠ Ø­Ø§Ù„Ø© ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„
    weeks = [
      { id: "1", name: "Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø£ÙˆÙ„", date: "2023-09-01" },
      { id: "2", name: "Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ø«Ø§Ù†ÙŠ", date: "2023-09-08" }
    ];
    renderWeeksList();
    updateWeekSelect();
    updateReportWeekSelect();
  }
}

async function fetchAttendance() {
  try {
    const response = await fetch(`${SCRIPT_URL}?type=attendance`);
    if (!response.ok) throw new Error('ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
    
    const data = await response.json();
    
    if (data.error) {
      throw new Error(data.error);
    }
    
    attendance = {};
    data.slice(1).forEach(row => {
      const studentId = row[0].toString();
      const weekId = row[1].toString();
      const status = row[3];
      if (!attendance[weekId]) attendance[weekId] = {};
      attendance[weekId][studentId] = status;
    });
  } catch (error) {
    console.error("Error fetching attendance:", error);
    // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© ÙÙŠ Ø­Ø§Ù„Ø© ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„
    attendance = {
      "1": { "1": "present", "2": "absent" },
      "2": { "1": "absent", "2": "present" }
    };
  }
}

// -------------------------
// ğŸ“Œ 3) Ø¯ÙˆØ§Ù„ Ø§Ù„Ø¥Ø¶Ø§ÙØ© ÙˆØ§Ù„Ø­Ø°Ù (Ù…Ø­Ø¯Ø«Ø©)
// -------------------------

async function addStudent(student) {
  try {
    const result = await makeRequest(SCRIPT_URL, {
      body: JSON.stringify({ type: "addStudent", ...student })
    });
    
    if (result.status === "success") {
      alert(result.message);
      await fetchStudents();
    } else {
      alert("Ø®Ø·Ø£: " + result.message);
    }
  } catch (error) {
    console.error("Error adding student:", error);
    alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ø§Ù„Ø¨: " + error.message);
  }
}

async function addWeek(week) {
  try {
    const result = await makeRequest(SCRIPT_URL, {
      body: JSON.stringify({ type: "addWeek", ...week })
    });
    
    if (result.status === "success") {
      alert(result.message);
      await fetchWeeks();
    } else {
      alert("Ø®Ø·Ø£: " + result.message);
    }
  } catch (error) {
    console.error("Error adding week:", error);
    alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹: " + error.message);
  }
}

async function addAttendance(attendanceData) {
  try {
    const result = await makeRequest(SCRIPT_URL, {
      body: JSON.stringify({ type: "addAttendance", ...attendanceData })
    });
    
    if (result.status !== "success") {
      console.error("Error saving attendance:", result.message);
      return false;
    }
    return true;
  } catch (error) {
    console.error("Error adding attendance:", error);
    return false;
  }
}

async function deleteStudent(id) {
  if (!confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø·Ø§Ù„Ø¨ØŸ")) return;
  
  try {
    const cleanId = String(id).trim();
    
    const result = await makeRequest(SCRIPT_URL, {
      body: JSON.stringify({ type: "deleteStudent", id: cleanId })
    });
    
    if (result.status === "success") {
      alert(result.message);
      await fetchStudents();
    } else {
      alert("Ø®Ø·Ø£: " + result.message);
    }
  } catch (error) {
    console.error("Error deleting student:", error);
    alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: " + error.message);
  }
}

async function deleteWeek(id) {
  if (!confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ØŸ")) return;
  
  try {
    const cleanId = String(id).trim();
    
    const result = await makeRequest(SCRIPT_URL, {
      body: JSON.stringify({ type: "deleteWeek", id: cleanId })
    });
    
    if (result.status === "success") {
      alert(result.message);
      await fetchWeeks();
    } else {
      alert("Ø®Ø·Ø£: " + result.message);
    }
  } catch (error) {
    console.error("Error deleting week:", error);
    alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: " + error.message);
  }
}

// -------------------------
// ğŸ“Œ 4) Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø§Ø¨
// -------------------------

function renderStudentsList() {
  const tbody = document.getElementById("studentsTableBody");
  if (!tbody) return;
  
  tbody.innerHTML = "";
  students.forEach(student => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${student.name}</td>
      <td>${student.guardian}</td>
      <td>${student.studentPhone || "N/A"}</td>
      <td>${student.fatherPhone}</td>
      <td>${student.motherPhone}</td>
      <td>
        <div class="action-buttons">
          <button class="btn btn-warning" onclick="editStudent('${student.id}')">ØªØ¹Ø¯ÙŠÙ„</button>
          <button class="btn btn-danger" onclick="deleteStudent('${student.id}')">Ø­Ø°Ù</button>
        </div>
      </td>
    `;
    tbody.appendChild(tr);
  });
}

function editStudent(id) {
  const student = students.find(s => s.id == id);
  if (student) {
    document.getElementById("studentName").value = student.name;
    document.getElementById("guardianName").value = student.guardian;
    document.getElementById("studentPhone").value = student.studentPhone || "";
    document.getElementById("fatherPhone").value = student.fatherPhone;
    document.getElementById("motherPhone").value = student.motherPhone;
    
    const submitButton = document.querySelector("#studentForm button");
    submitButton.textContent = "ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø·Ø§Ù„Ø¨";
    submitButton.setAttribute("data-editing", id);
    
    if (!document.getElementById("cancelEdit")) {
      const cancelButton = document.createElement("button");
      cancelButton.type = "button";
      cancelButton.id = "cancelEdit";
      cancelButton.className = "btn btn-warning";
      cancelButton.textContent = "Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„";
      cancelButton.style.marginRight = "10px";
      cancelButton.onclick = cancelEdit;
      document.getElementById("studentForm").insertBefore(cancelButton, submitButton);
    }
  }
}

function cancelEdit() {
  document.getElementById("studentForm").reset();
  const submitButton = document.querySelector("#studentForm button");
  submitButton.textContent = "Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ø§Ù„Ø¨";
  submitButton.removeAttribute("data-editing");
  
  const cancelButton = document.getElementById("cancelEdit");
  if (cancelButton) {
    cancelButton.remove();
  }
}

// -------------------------
// ğŸ“Œ 5) Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø³Ø§Ø¨ÙŠØ¹
// -------------------------

function renderWeeksList() {
  const tbody = document.getElementById("weeksTableBody");
  if (!tbody) return;
  
  tbody.innerHTML = "";
  weeks.forEach(week => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${week.name}</td>
      <td>${week.date}</td>
      <td>${students.length}</td>
      <td>
        <div class="action-buttons">
          <button class="btn btn-danger" onclick="deleteWeek('${week.id}')">Ø­Ø°Ù</button>
        </div>
      </td>
    `;
    tbody.appendChild(tr);
  });
}

function updateWeekSelect() {
  const select = document.getElementById("weekSelect");
  if (!select) return;
  
  select.innerHTML = '<option value="">-- Ø§Ø®ØªØ± Ø£Ø³Ø¨ÙˆØ¹ --</option>';
  weeks.forEach(week => {
    const option = document.createElement("option");
    option.value = week.id;
    option.textContent = `${week.name} (${week.date})`;
    select.appendChild(option);
  });
}

function updateReportWeekSelect() {
  const select = document.getElementById("reportWeekSelect");
  if (!select) return;
  
  select.innerHTML = '<option value="">-- Ø§Ø®ØªØ± Ø£Ø³Ø¨ÙˆØ¹ --</option>';
  weeks.forEach(week => {
    const option = document.createElement("option");
    option.value = week.id;
    option.textContent = `${week.name} (${week.date})`;
    select.appendChild(option);
  });
}

// -------------------------
// ğŸ“Œ 6) Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
// -------------------------

document.addEventListener('DOMContentLoaded', function() {
  // Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ø§Ù„Ø¨
  const studentForm = document.getElementById("studentForm");
  if (studentForm) {
    studentForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      
      if (isProcessing) {
        alert("ÙŠÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ© Ø£Ø®Ø±Ù‰ Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±");
        return;
      }
      
      const submitButton = document.querySelector("#studentForm button");
      const isEditing = submitButton.hasAttribute("data-editing");
      
      if (isEditing) {
        const studentId = submitButton.getAttribute("data-editing");
        alert("ÙˆØ¸ÙŠÙØ© Ø§Ù„ØªØ­Ø¯ÙŠØ« Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±");
        cancelEdit();
      } else {
        const student = {
          id: Date.now().toString(),
          name: document.getElementById("studentName").value,
          guardian: document.getElementById("guardianName").value,
          studentPhone: document.getElementById("studentPhone").value,
          fatherPhone: document.getElementById("fatherPhone").value,
          motherPhone: document.getElementById("motherPhone").value
        };
        await addStudent(student);
        studentForm.reset();
      }
    });
  }
  
  // Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹
  const weekForm = document.getElementById("weekForm");
  if (weekForm) {
    weekForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      
      if (isProcessing) {
        alert("ÙŠÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ© Ø£Ø®Ø±Ù‰ Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±");
        return;
      }
      
      const week = {
        id: Date.now().toString(),
        name: document.getElementById("weekName").value,
        date: document.getElementById("weekDate").value
      };
      await addWeek(week);
      weekForm.reset();
    });
  }
  
  // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
  fetchStudents();
  fetchWeeks();
  fetchAttendance();
});

// Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø¯ÙˆØ§Ù„ (Ø§Ù„Ø¨Ø­Ø«ØŒ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±ØŒ Ø§Ù„ØªÙ†Ù‚Ù„) ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ±
// ... [Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ ÙŠØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡Ùˆ]
</script>

</body>





